<!DOCTYPE html>
<html>
<head>
    <title>그림 토글과 자동 변경</title>
</head>
<body>
    <!-- 그림들을 표시할 img 태그들 -->
    <img src="1.jpg" id="image1" onclick="toggleImage(1)">
    <img src="2.jpg" id="image2" onclick="toggleImage(2)">
    <img src="3.jpg" id="image3" onclick="toggleImage(3)">
    <img src="4.jpg" id="image4" onclick="toggleImage(4)">

    <script>
        let imageStatus = [false, false, false, false]; // 각 그림의 ON/OFF 상태를 저장하는 배열
        let intervalIds = [null, null, null, null]; // 각 그림의 자동 변경을 위한 인터벌 ID를 저장하는 배열

        function toggleImage(imageNum) {
            // 해당 그림의 상태를 토글
            imageStatus[imageNum - 1] = !imageStatus[imageNum - 1];

            // 그림 상태에 따라 ON/OFF 처리
            if (imageStatus[imageNum - 1]) {
                document.getElementById("image" + imageNum).style.opacity = 1;
                if (imageNum === 1) {
                    // 1번 그림은 스페이스바를 누를 때마다 토글되도록 추가 처리
                    document.addEventListener("keydown", function (event) {
                        if (event.code === "Space") {
                            toggleImage(1);
                        }
                    });
                }
                // ON 상태에서는 일정 간격으로 다음 장의 그림으로 변경
                if (imageNum === 2) {
                    intervalIds[1] = setInterval(function () { toggleImage(2); }, 200); // 0.2초
                } else if (imageNum === 3) {
                    intervalIds[2] = setInterval(function () { toggleImage(3); }, 300); // 0.3초
                } else if (imageNum === 4) {
                    intervalIds[3] = setInterval(function () { toggleImage(4); }, 400); // 0.4초
                }
            } else {
                // OFF 상태라면 자동 변경 인터벌 제거
                clearInterval(intervalIds[imageNum - 1]);
                intervalIds[imageNum - 1] = null;
                document.getElementById("image" + imageNum).style.opacity = 0.5;
            }
        }
    </script>
</body>
</html>
